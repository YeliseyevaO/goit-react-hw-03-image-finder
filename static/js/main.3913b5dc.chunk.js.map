{"version":3,"sources":["Components/Searchbar/Searchbar.js","services/photo-api.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Loader/Loader.js","Components/Button/Button.js","Components/Modal/Modal.js","App.js","reportWebVitals.js","index.js"],"names":["Searchbar","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","React","Component","fetchPhoto","photoName","currentPage","fetch","then","res","json","data","hits","ImageGalleryItem","src","alt","ImageGallery","gallery","onClose","clickPhoto","map","id","webformatURL","tags","onClick","BildLoader","color","height","width","timeout","Button","foundMore","modalRoot","document","querySelector","Modal","handleKeyDown","code","handleBackdropClick","event","target","console","log","window","addEventListener","removeEventListener","createPortal","crs","App","photoList","isLoading","error","showModal","activePhoto","changePhoto","getPhoto","options","prevState","catch","finally","findActivePhoto","imgId","find","photo","toggleModal","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","length","shouldRenderLoadMoreButton","largeImageURL","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3913b5dc.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Searchbar.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Searchbar extends React.Component {\r\n  state = { query: \"\" };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ query: e.currentTarget.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;\r\n","const fetchPhoto = ({ photoName = \"\", currentPage = 1 }) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${photoName}&page=${currentPage}&key=23352968-b8b048e55839ee6b2f6a0c2b8&image_type=photo&orientation=horizontal&per_page=12`\r\n  )\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .then((data) => {\r\n      return data.hits;\r\n    });\r\n};\r\nexport { fetchPhoto };\r\n","import React from \"react\";\r\nimport \"./ImageGalleryItem.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ImageGalleryItem({ src, alt }) {\r\n  return (\r\n    <>\r\n      <img src={src} alt={alt} className=\"ImageGalleryItem-image\" />\r\n    </>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport \"./ImageGallery.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ImageGallery({ gallery, onClose, clickPhoto }) {\r\n  // console.log(gallery);\r\n  return (\r\n    <>\r\n      <ul className=\"ImageGallery\">\r\n        {gallery.map(({ id, webformatURL, tags }) => (\r\n          <li\r\n            className=\"ImageGalleryItem\"\r\n            key={id}\r\n            onClick={() => {\r\n              onClose();\r\n              clickPhoto(id);\r\n            }}\r\n          >\r\n            <ImageGalleryItem src={webformatURL} alt={tags} />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      tags: PropTypes.string.isRequired,\r\n    })\r\n  ),\r\n  onClose: PropTypes.func.isRequired,\r\n  clickPhoto: PropTypes.func.isRequired,\r\n};\r\n","import Loader from \"react-loader-spinner\";\r\nimport React from \"react\";\r\n\r\nconst BildLoader = () => {\r\n  return (\r\n    <Loader\r\n      type=\"Puff\"\r\n      color=\"#00BFFF\"\r\n      height={100}\r\n      width={100}\r\n      timeout={3000} //3 secs\r\n    />\r\n  );\r\n};\r\n\r\nexport default BildLoader;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./Button.css\";\r\nconst Button = ({ foundMore }) => {\r\n  return (\r\n    <>\r\n      <button type=\"button\" onClick={foundMore} className=\"moreButton\">\r\n        Загрузить ещё\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  foundMore: PropTypes.func.isRequired,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport \"./Modal.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    console.log(\"Modal componentDidMount\");\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log(\"Modal componentWillUnmount\");\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">\r\n          <img src={this.props.crs} alt={this.props.alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  crs: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n};\r\n","import \"./App.css\";\nimport React from \"react\";\nimport Searchbar from \"./Components/Searchbar\";\nimport { fetchPhoto } from \"./services/photo-api\";\nimport ImageGallery from \"./Components/ImageGallery\";\nimport BildLoader from \"./Components/Loader/Loader\";\nimport Button from \"./Components/Button\";\nimport Modal from \"./Components/Modal/Modal\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  state = {\n    photoName: \"\",\n    photoList: [],\n    currentPage: 1,\n    isLoading: false,\n    error: null,\n    showModal: false,\n    activePhoto: {},\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.photoName !== this.state.photoName) {\n      this.getPhoto();\n    }\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n    if (\n      prevState.photoName !== this.state.photoName &&\n      this.state.photoList.length > 0\n    ) {\n      this.setState({ photoList: [], currentPage: 1 });\n    }\n  }\n\n  changePhoto = (query) => {\n    this.setState({ photoName: query });\n  };\n\n  getPhoto = () => {\n    const { currentPage, photoName } = this.state;\n    const options = { photoName, currentPage };\n\n    this.setState({ isLoading: true });\n\n    return fetchPhoto(options)\n      .then((photoList) => {\n        this.setState((prevState) => ({\n          photoList: [...prevState.photoList, ...photoList],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch((error) => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n  findActivePhoto = (imgId) => {\n    this.setState((prevState) => ({\n      activePhoto: prevState.photoList.find((photo) => imgId === photo.id),\n    }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { photoList, isLoading, showModal, activePhoto } = this.state;\n    const shouldRenderLoadMoreButton = photoList.length > 0 && !isLoading;\n    const { largeImageURL, tags } = activePhoto;\n    return (\n      <>\n        <Searchbar onSubmit={this.changePhoto} />\n        <ImageGallery\n          gallery={photoList}\n          onClose={this.toggleModal}\n          clickPhoto={this.findActivePhoto}\n        />\n        {isLoading && <BildLoader />}\n        {shouldRenderLoadMoreButton && <Button foundMore={this.getPhoto} />}\n        {showModal && (\n          <Modal onClose={this.toggleModal} crs={largeImageURL} alt={tags} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}